var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");require("core-js/modules/es.array.concat");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf3=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _native=_interopRequireDefault(require("@emotion/native"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _addons=_interopRequireDefault(require("@storybook/addons"));var _coreEvents=_interopRequireDefault(require("@storybook/core-events"));var _jsxFileName="/Users/shilman/projects/baseline/storybook/app/react-native/src/preview/components/StoryView/index.tsx";function _EMOTION_STRINGIFIED_CSS_ERROR__(){return"You have tried to stringify object returned from `css` function. It isn't supposed to be used directly (e.g. as value of the `className` prop), but rather handed to emotion so it can handle it (e.g. as value of `css` prop).";}var HelpContainer=_native["default"].View("flex:1;padding-horizontal:15;padding-vertical:15;align-items:center;justify-content:center;");var StoryView=function(_Component){(0,_inherits2["default"])(StoryView,_Component);function StoryView(){var _getPrototypeOf2;var _this;(0,_classCallCheck2["default"])(this,StoryView);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2["default"])(this,(_getPrototypeOf2=(0,_getPrototypeOf3["default"])(StoryView)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.forceReRender=function(){_this.forceUpdate();};_this.renderHelp=function(){var url=_this.props.url;return _react["default"].createElement(HelpContainer,{__source:{fileName:_jsxFileName,lineNumber:51}},url&&url.length?_react["default"].createElement(_reactNative.Text,{__source:{fileName:_jsxFileName,lineNumber:53}},"Please open the Storybook UI (",url,") with a web browser and select a story for preview."):_react["default"].createElement(_reactNative.Text,{__source:{fileName:_jsxFileName,lineNumber:57}},"Please open the Storybook UI with a web browser and select a story for preview."));};_this.renderOnDeviceUIHelp=function(){return _react["default"].createElement(HelpContainer,{__source:{fileName:_jsxFileName,lineNumber:66}},_react["default"].createElement(_reactNative.Text,{__source:{fileName:_jsxFileName,lineNumber:67}},"Please open navigator and select a story to preview."));};return _this;}(0,_createClass2["default"])(StoryView,[{key:"componentDidMount",value:function componentDidMount(){var channel=_addons["default"].getChannel();channel.on(_coreEvents["default"].STORY_RENDER,this.forceReRender);channel.on(_coreEvents["default"].FORCE_RE_RENDER,this.forceReRender);}},{key:"componentDidUpdate",value:function componentDidUpdate(){var channel=_addons["default"].getChannel();var stories=this.props.stories;var _stories$getSelection=stories.getSelection(),storyId=_stories$getSelection.storyId;if(storyId){channel.emit(_coreEvents["default"].STORY_RENDERED,{storyId:storyId});}}},{key:"componentWillUnmount",value:function componentWillUnmount(){var channel=_addons["default"].getChannel();channel.removeListener(_coreEvents["default"].STORY_RENDER,this.forceReRender);channel.removeListener(_coreEvents["default"].FORCE_RE_RENDER,this.forceReRender);}},{key:"render",value:function render(){var _this$props=this.props,onDevice=_this$props.onDevice,stories=_this$props.stories;var _stories$getSelection2=stories.getSelection(),storyId=_stories$getSelection2.storyId;var story=stories.fromId(storyId);if(story&&story.storyFn){var id=story.id,storyFn=story.storyFn;return _react["default"].createElement(_reactNative.View,{key:id,testID:id,style:{flex:1},__source:{fileName:_jsxFileName,lineNumber:79}},storyFn());}if(onDevice){return this.renderOnDeviceUIHelp();}return this.renderHelp();}}]);return StoryView;}(_react.Component);exports["default"]=StoryView;