var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));var _createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass"));var _possibleConstructorReturn2=_interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));var _getPrototypeOf2=_interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));var _inherits2=_interopRequireDefault(require("@babel/runtime/helpers/inherits"));var _react=_interopRequireWildcard(require("react"));var _reactNative=require("react-native");var _jsxFileName="/Users/shilman/projects/baseline/storybook/app/react-native/src/preview/components/OnDeviceUI/absolute-positioned-keyboard-aware-view.tsx";var AbsolutePositionedKeyboardAwareView=function(_PureComponent){(0,_inherits2["default"])(AbsolutePositionedKeyboardAwareView,_PureComponent);function AbsolutePositionedKeyboardAwareView(props){var _this;(0,_classCallCheck2["default"])(this,AbsolutePositionedKeyboardAwareView);_this=(0,_possibleConstructorReturn2["default"])(this,(0,_getPrototypeOf2["default"])(AbsolutePositionedKeyboardAwareView).call(this,props));_this.keyboardDidShowHandler=function(e){if(_reactNative.Platform.OS==='android'){var previewWidth=_this.props.previewWidth;if(previewWidth===e.endCoordinates.width){_this.keyboardOpen=true;}}};_this.removeKeyboardOnOrientationChange=function(){if(_reactNative.Platform.OS==='android'){_this.keyboardOpen=false;}};_this.keyboardDidHideHandler=function(){if(_this.keyboardOpen){_this.keyboardOpen=false;}};_this.onLayoutHandler=function(_ref){var nativeEvent=_ref.nativeEvent;if(!_this.keyboardOpen){var _nativeEvent$layout=nativeEvent.layout,width=_nativeEvent$layout.width,height=_nativeEvent$layout.height;var onLayout=_this.props.onLayout;onLayout({previewHeight:height,previewWidth:width});}};_this.keyboardDidShowListener=void 0;_this.keyboardDidHideListener=void 0;_this.keyboardOpen=void 0;_this.keyboardDidShowListener=_reactNative.Keyboard.addListener('keyboardDidShow',_this.keyboardDidShowHandler);_this.keyboardDidHideListener=_reactNative.Keyboard.addListener('keyboardDidHide',_this.keyboardDidHideHandler);_reactNative.Dimensions.addEventListener('change',_this.removeKeyboardOnOrientationChange);return _this;}(0,_createClass2["default"])(AbsolutePositionedKeyboardAwareView,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.keyboardDidShowListener.remove();this.keyboardDidHideListener.remove();_reactNative.Dimensions.removeEventListener('change',this.removeKeyboardOnOrientationChange);}},{key:"render",value:function render(){var _this$props=this.props,children=_this$props.children,previewWidth=_this$props.previewWidth,previewHeight=_this$props.previewHeight;return _react["default"].createElement(_reactNative.View,{style:{flex:1},onLayout:this.onLayoutHandler,__source:{fileName:_jsxFileName,lineNumber:90}},_react["default"].createElement(_reactNative.View,{style:previewWidth===0?{flex:1}:{position:'absolute',width:previewWidth,height:previewHeight},__source:{fileName:_jsxFileName,lineNumber:91}},children));}}]);return AbsolutePositionedKeyboardAwareView;}(_react.PureComponent);exports["default"]=AbsolutePositionedKeyboardAwareView;